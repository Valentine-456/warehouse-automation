import{l as z,j as y,i as A,m as V,_ as I,r as a,o as D,c as $,w as r,a as o,b as d,d as S,f as u,e as w,F as j,h as T,k as q,t as P}from"./index-55f5978c.js";import{u as B}from"./login-661ada66.js";import{u as U}from"./categoryEditor-a2289465.js";const g=z("productEditorStore",{state:()=>({isCreateDialogOpen:!1,isDeleteDialogOpen:!1,isUpdateDialogOpen:!1,chosenItem:{},products:[]}),getters:{},actions:{async getAll(e,t,c="Any"){let n="/product?";t.length>0&&(n+=`sortBy=${t}`),c!="Any"&&(n+=`&category=${encodeURIComponent(c)}`),console.log(n);try{const s=await fetch(n,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const l=await s.json();return this.products=l,!0}return!1}catch(s){return console.error("Error:",s),!1}},async create(e,t){const c="/product";try{return!!(await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)})).ok}catch(n){return console.error("Error:",n),!1}},async delete(e,t){const c=`/product/${t}`;console.log(c);try{return!!(await fetch(c,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok}catch(n){return console.error("Error:",n),!1}},async update(e,t){const c=`/product/${t.id_product}`;try{return!!(await fetch(c,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)})).ok}catch(n){return console.error("Error:",n),!1}},async getAllByProductName(e,t){const c=`/product/searchByName/${t}`;console.log(c);try{const n=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(n.ok){const s=await n.json();return this.products=s,!0}return!1}catch(n){return console.error("Error:",n),!1}},async getMultiplePropositionsProducts(e,t,c="Any"){let n="/product/statistics/multiplePropositions?";t.length>0&&(n+=`sortBy=${t}`),c!="Any"&&(n+=`&category=${encodeURIComponent(c)}`),console.log(n);try{const s=await fetch(n,{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const l=await s.json();return this.products=l,!0}return!1}catch(s){return console.error("Error:",s),!1}}}}),F={data:()=>({categoryChosen:{category_name:"",category_number:0},product_name:"",charachteristics:""}),computed:{...y(U,["categories"]),...y(B,["jwt_token"]),...A(g,["isCreateDialogOpen"])},methods:{...V(g,["create"]),async createRequest(){if(this.product_name.length==0||this.categoryChosen.category_number<=0)return;await this.create(this.jwt_token,{product_name:this.product_name,charachteristics:this.charachteristics,category_name:this.categoryChosen.category_name,category_number:this.categoryChosen.category_number,id_product:0})?this.closeDialog():alert("The error happened")},closeDialog(){this.categoryChosen={category_name:"",category_number:0},this.charachteristics="",this.product_name="",this.isCreateDialogOpen=!1}}};function M(e,t,c,n,s,l){const v=a("v-card-text"),m=a("v-text-field"),f=a("v-select"),C=a("v-form"),p=a("v-card-item"),h=a("v-btn"),b=a("v-card-actions"),k=a("v-card"),O=a("v-dialog");return D(),$(O,{modelValue:e.isCreateDialogOpen,"onUpdate:modelValue":t[4]||(t[4]=i=>e.isCreateDialogOpen=i),width:"400"},{default:r(()=>[o(k,null,{default:r(()=>[o(v,null,{default:r(()=>[d(" Create Product ")]),_:1}),o(p,null,{default:r(()=>[o(C,{onSubmit:t[3]||(t[3]=S(()=>{},["prevent"]))},{default:r(()=>[o(m,{modelValue:e.product_name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.product_name=i),label:"product_name"},null,8,["modelValue"]),o(m,{modelValue:e.charachteristics,"onUpdate:modelValue":t[1]||(t[1]=i=>e.charachteristics=i),label:"charachteristics"},null,8,["modelValue"]),o(f,{modelValue:e.categoryChosen,"onUpdate:modelValue":t[2]||(t[2]=i=>e.categoryChosen=i),items:e.categories,"item-title":"category_name","item-value":"category_number",label:"Category","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(b,null,{default:r(()=>[o(h,{color:"green",onClick:l.createRequest},{default:r(()=>[d("Create")]),_:1},8,["onClick"]),o(h,{color:"grey",onClick:l.closeDialog},{default:r(()=>[d("Discard")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const H=I(F,[["render",M]]),L={data:()=>({}),computed:{...A(g,["isDeleteDialogOpen","chosenItem"]),...y(B,["jwt_token"])},methods:{...V(g,["delete"]),async deleteRequest(){await this.delete(this.jwt_token,this.chosenItem.id_product)?this.closeDialog():alert("The error happened")},closeDialog(){this.chosenItem={},this.isDeleteDialogOpen=!1}}},J=u("p",null,"Are you sure you want to delete this product?",-1);function G(e,t,c,n,s,l){const v=a("v-card-text"),m=a("v-card-item"),f=a("v-btn"),C=a("v-card-actions"),p=a("v-card"),h=a("v-dialog");return D(),$(h,{modelValue:e.isDeleteDialogOpen,"onUpdate:modelValue":t[0]||(t[0]=b=>e.isDeleteDialogOpen=b),width:"400"},{default:r(()=>[o(p,null,{default:r(()=>[o(v,null,{default:r(()=>[d(" Delete Product ")]),_:1}),o(m,null,{default:r(()=>[J]),_:1}),o(C,null,{default:r(()=>[o(f,{color:"red",onClick:l.deleteRequest},{default:r(()=>[d("Delete")]),_:1},8,["onClick"]),o(f,{color:"grey",onClick:l.closeDialog},{default:r(()=>[d("Discard")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const W=I(L,[["render",G]]),K={data:()=>({categoryChosen:{category_number:0,category_name:""}}),computed:{...A(g,["isUpdateDialogOpen","chosenItem"]),...y(B,["jwt_token"]),...y(U,["categories"])},methods:{...V(g,["update"]),async updateRequest(){if(this.chosenItem.category_name.length==0)return;await this.update(this.jwt_token,{...this.chosenItem,category_number:this.categoryChosen.category_number})?this.closeDialog():alert("The error happened")},closeDialog(){this.chosenItem={},this.isUpdateDialogOpen=!1}}};function Q(e,t,c,n,s,l){const v=a("v-card-text"),m=a("v-text-field"),f=a("v-select"),C=a("v-form"),p=a("v-card-item"),h=a("v-btn"),b=a("v-card-actions"),k=a("v-card"),O=a("v-dialog");return D(),$(O,{modelValue:e.isUpdateDialogOpen,"onUpdate:modelValue":t[4]||(t[4]=i=>e.isUpdateDialogOpen=i),width:"400"},{default:r(()=>[o(k,null,{default:r(()=>[o(v,null,{default:r(()=>[d(" Update Product ")]),_:1}),o(p,null,{default:r(()=>[o(C,{onSubmit:t[3]||(t[3]=S(()=>{},["prevent"]))},{default:r(()=>[o(m,{modelValue:e.chosenItem.product_name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.chosenItem.product_name=i),label:"product_name"},null,8,["modelValue"]),o(m,{modelValue:e.chosenItem.charachteristics,"onUpdate:modelValue":t[1]||(t[1]=i=>e.chosenItem.charachteristics=i),label:"charachteristics"},null,8,["modelValue"]),o(f,{modelValue:e.categoryChosen,"onUpdate:modelValue":t[2]||(t[2]=i=>e.categoryChosen=i),items:e.categories,"item-title":"category_name","item-value":"category_number",label:"Category","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1}),o(b,null,{default:r(()=>[o(h,{color:"orange",onClick:l.updateRequest},{default:r(()=>[d("Update")]),_:1},8,["onClick"]),o(h,{color:"grey",onClick:l.closeDialog},{default:r(()=>[d("Discard")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const X=I(K,[["render",Q]]),Y={components:{ProductCreateDialog:H,ProductDeleteDialog:W,ProductUpdateDialog:X},mounted(){this.getAllCategories(this.jwt_token)},data(){return{sortBy:"",sortOptions:["category_name","product_name",""],categoryFilter:"Any"}},computed:{...A(g,["isCreateDialogOpen","chosenItem","isDeleteDialogOpen","isUpdateDialogOpen"]),...y(g,["products"]),...y(B,["jwt_token"]),...y(U,["categories"]),tableHeight(){return window.innerHeight*.5},categoryFilterOptions(){return["Any"].concat(this.categories.map(e=>e.category_name))}},methods:{...V(g,["getAll","getMultiplePropositionsProducts"]),...V(U,{getAllCategories:"getAll"}),async search(){let e;e=await this.getAll(this.jwt_token,this.sortBy,this.categoryFilter),e||alert("The error happened")},create(){this.isCreateDialogOpen=!0},deleteRequest(e){this.chosenItem=e,this.isDeleteDialogOpen=!0},updateRequest(e){this.chosenItem={...e},this.isUpdateDialogOpen=!0},async searchMultiplePropositionsProducts(){let e;e=await this.getMultiplePropositionsProducts(this.jwt_token,this.sortBy,this.categoryFilter),e||alert("The error happened")}}};const Z={class:"editor-block v-container pa-5"},ee=u("br",null,null,-1),te=u("thead",null,[u("tr",null,[u("th",null,"Number"),u("th",null,"Name"),u("th",null,"Category"),u("th",null,"Characteristics"),u("th",null,"Options")])],-1),oe={key:0};function ae(e,t,c,n,s,l){const v=a("ProductCreateDialog"),m=a("ProductDeleteDialog"),f=a("ProductUpdateDialog"),C=a("v-card-title"),p=a("v-btn"),h=a("v-expansion-panel-text"),b=a("v-expansion-panel"),k=a("v-expansion-panels"),O=a("v-card-action"),i=a("v-select"),E=a("v-card-actions"),N=a("v-card"),R=a("v-table");return D(),w(j,null,[o(v),o(m),o(f),u("div",Z,[o(N,{class:"mb-5"},{default:r(()=>[o(C,{class:"text-h4 font-weight-bold"},{default:r(()=>[d("Product")]),_:1}),o(O,{class:"d-flex"},{default:r(()=>[o(k,{class:"my-5"},{default:r(()=>[o(b,{title:"Statistics"},{default:r(()=>[o(h,{class:"advance-search-bar"},{default:r(()=>[o(p,{size:"large",onClick:l.searchMultiplePropositionsProducts,class:"mb-5 mt-0 mx-5 bg-blue"},{default:r(()=>[d("Get products with"),ee,d(" multiple propositions")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1}),o(E,{class:"d-flex"},{default:r(()=>[o(i,{modelValue:s.sortBy,"onUpdate:modelValue":t[0]||(t[0]=_=>s.sortBy=_),density:"compact",class:"sort-by",items:s.sortOptions,label:"Sort By"},null,8,["modelValue","items"]),o(i,{modelValue:s.categoryFilter,"onUpdate:modelValue":t[1]||(t[1]=_=>s.categoryFilter=_),density:"compact",class:"sort-by",items:l.categoryFilterOptions,label:"Category Filter"},null,8,["modelValue","items"]),o(p,{onClick:l.search,size:"large",class:"mb-5 mt-0 mx-5 bg-blue"},{default:r(()=>[d("Search")]),_:1},8,["onClick"]),o(p,{onClick:l.create,size:"large",class:"mb-5 mt-0 bg-green"},{default:r(()=>[d("Create New")]),_:1},8,["onClick"])]),_:1})]),_:1}),o(R,{height:l.tableHeight,hover:"","fixed-header":"",density:"compact",class:"data-table mt-5"},{default:r(()=>[te,e.products.length!=0?(D(),w("tbody",oe,[(D(!0),w(j,null,T(e.products,_=>(D(),w("tr",{key:_.id_product},[u("td",null,P(_.id_product),1),u("td",null,P(_.product_name),1),u("td",null,P(_.category_name),1),u("td",null,P(_.charachteristics),1),u("td",null,[o(p,{size:"small",onClick:x=>l.updateRequest(_),class:"bg-orange"},{default:r(()=>[d("Update")]),_:2},1032,["onClick"]),o(p,{size:"small",onClick:x=>l.deleteRequest(_),class:"bg-red"},{default:r(()=>[d("Delete")]),_:2},1032,["onClick"])])]))),128))])):q("",!0)]),_:1},8,["height"])])],64)}const le=I(Y,[["render",ae]]);export{le as default};
